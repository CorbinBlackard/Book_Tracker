<div class="book-card">
    <!-- Allows book title to link to book page -->
    <%= link_to book_path(book), class: "book-card-link" do %>
        <h3><%= book.title %></h3>
    <% end %>

    <!-- Display the book's author -->
    <p><%= book.author %></p>

    <!-- Display the book's genre -->
    <p><%= book.genre %></p>



    <!-- Only show progress bar if the book is not finished (book.read == false) -->
    <% unless book.read %>
        <!-- Progress Bar -->
        <div class="progress-bar">
        <!-- Set the width of the progress bar based on the calculated progress percentage -->
        <div class="progress" style="width: <%= book.progress_percentage %>%;"></div>
        </div>
        
        <!-- Display the percentage of progress -->
        <span class="progress-text"><%= book.progress_percentage %>%</span>
        <!-- Display the current page and total pages -->
        <p><%= book.page_number %> / <%= book.total_pages %> Pages</p>
    <% end %>

    <!-- Show if the book is finished or unread -->
    <p><%= book.read ? 'Finished' : 'Unfinished' %></p>

    <% unless book.read  %>
        <%= form_with model: book, url: book_path(book), method: :patch, remote: true do |form| %>
            <div class="read-toggle">
                <%= form.hidden_field :read, value: !book.read %>
                <%= form.submit book.read? ? "Mark as Unread" : "Mark as Read", class: "read-button #{book.read? ? 'read' : 'unread'}" %>
            </div>
        <% end %>
    <% end %>
</div>

