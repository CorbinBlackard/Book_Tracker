<!-- Hero Section -->
<section class="hero">
   <div class="hero-content">
      <% if user_signed_in? %>
         <h1>Welcome to Book Tracker, <%= current_user.name %></h1>
         <p>Track all the books you've read and keep your collection organized!</p>
         <%= link_to "Add New Book âŠ•", new_book_path, class: "add-book-btn" %>
      <% else %>
         <h1>Welcome to Book Tracker</h1>
         <p>Sign in to track all the books you've read and keep your collection organized!</p>
         <%= link_to "Login", new_user_session_path, class: "nav-link button" %>
         <%= link_to "Sign Up", new_user_registration_path, class: "nav-link button" %>
      <% end %>
   </div>
</section>

<% if user_signed_in? %>
   <%# Top Genre with emoji %>
   <% emoji = case @top_genre
      when "Fantasy" then "ðŸ²âœ¨"
      when "Scifi" then "ðŸ›¸ðŸ§¬"
      when "Historical Fiction" then "ðŸºðŸ“œ"
      when "Mystery" then "ðŸ•µï¸â€â™‚ï¸ðŸ”"
      when "Romance" then "â¤ï¸ðŸ’Œ"
      when "Horror" then "ðŸ‘»ðŸ©¸"
      when "Biography" then "ðŸ‘¤ðŸ“–"
      when "Self-Help" then "ðŸ’¡ðŸ“"
      else "ðŸ“˜"
   end %>

   <div class="top-genre">
      <p>
         ðŸ“š Most-Read Genre:
         <strong>
            <%= link_to books_path(genre: @top_genre), class: "genre-button" do %>
               <%= @top_genre %> <%= emoji %>
            <% end %>
         </strong>
      </p>
   </div>

   <!-- Genre links -->
   <h3>Filter Books by Genre:</h3>
   <div class="genre-links">
      <%= link_to "All", books_path, class: ["genre-button2", ("active" unless params[:genre].present?)].compact.join(" ") %>
      <% @genres.each do |g| %>
         <%= link_to g, books_path(genre: g), class: ["genre-button2", ("active" if params[:genre] == g)].compact.join(" ") %>
      <% end %>
   </div>

   <% if params[:genre].present? %>
      <p>Showing only <strong><%= params[:genre] %></strong> :</p>
   <% end %>

   <div class="books-sections">
      <!-- Currently Reading -->
      <section class="book-section">
         <h1>ðŸ“– Currently Reading: <%= @current_read.count %></h1>
         <div class="scroll-box">
            <% if @current_read.any? %>
               <% @current_read.each do |book| %>
                  <%= render 'book_card', book: book, section_prefix: 'current-read' %>
               <% end %>
            <% else %>
               <p>You are not currently reading any books...</p>
            <% end %>
         </div>
      </section>

      <!-- Finished Books -->
      <section class="book-section">
         <h1>âœ… Finished Books: <%= @finished_books.count %></h1>
         <div class="scroll-box">
            <% if @finished_books.any? %>
               <% @finished_books.each do |book| %>
                  <%= render 'book_card', book: book, section_prefix: 'finished' %>
               <% end %>
            <% else %>
               <p>You have not finished any books yet...</p>
            <% end %>
         </div>
      </section>

      <!-- Not Started Books -->
      <section class="book-section">
         <h1>ðŸ“š Not Started: <%= @not_started.count %></h1>
         <div class="scroll-box">
            <% if @not_started.any? %>
               <% @not_started.each do |book| %>
                  <%= render 'book_card', book: book, section_prefix: 'not-started' %>
               <% end %>
            <% else %>
               <p>Books you haven't started yet</p>
            <% end %>
         </div>
      </section>

      <!-- Wishlist -->
      <section class="book-section">
         <h2>ðŸ“Œ Wishlist: <%= @wishlist_books.count %></h2>
         <div class="scroll-box">
            <% if @wishlist_books.any? %>
               <% @wishlist_books.each do |book| %>
                  <%= render 'book_card', book: book, section_prefix: 'wishlist' %>
               <% end %>
            <% else %>
               <p>Your wishlist is empty!</p>
            <% end %>
         </div>
      </section>

      <!-- All Books -->
      <section class="book-section">
         <h1>All Books: <%= @books.count %></h1>
         <div class="scroll-box">
            <% if @books.any? %>
               <% @books.each do |book| %>
                  <%= render 'book_card', book: book, section_prefix: 'all-books' %>
               <% end %>
            <% else %>
               <p>You do not have any books...</p>
            <% end %>
         </div>
      </section>
   </div>
<% else %>
   <p>Sign in to track your reading progress!</p>
<% end %>